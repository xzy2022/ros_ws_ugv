

## 实验原理

### 阿克曼运动学

设车辆轴距为$L$，接收到的速度命令为$(v,\omega)，$前轮偏转角度为$\delta$，后轮转速为$v'$，则控制变量满足
$$
v' = v,\quad
\delta = \arctan\left( \dfrac{L \omega}{v} \right)
$$

转弯半径$R$满足
$$
R = \frac{L}{\tan \delta}
$$

### 纯点跟踪
在小车系下，设预瞄点的坐标为$(x_d,y_d)$，预瞄距离为$L_d=\sqrt{x_d^2 + y_d^2}$，车辆轴距为$L$，则前轮偏转角度$\delta$满足
$$
\delta = \arctan\left( \frac{2L \cdot y_d}{{L_d}^2} \right)
$$
在给定期望速度$v_1$时，进一步可以求得速度命令为
$$
v = v_1,\quad
\omega = \frac{2 v_1 y_d}{{L_d}^2}
$$




## 日志系统

`src/my_robot_logger/nodes/ground_truth_logger.py`从`/smart/ground_truth/state`订阅真实状态（ground-truth）Odometry，并把它们转为 x y yaw(弧度)记录到日志中。

## 数据处理

`data_process/evaluate_tracking.py`接收目标路径 csv 和真实路径 txt，对于每一个真实路径点，会寻找离它最近的点，随后计算横向误差(欧氏距离)和航向误差(角度)。

```
/usr/bin/python3 /home/xzy/self-driving-my/ros_ws/data_process/evaluate_tracking.py
```

## 话题

```
/base_path # 全局路径，只有位置 yaw为弧度
/base_waypoints # 全局路径，包括位置和速度 yaw为弧度
/clicked_point
/clock
/final_path
/final_waypoints
/gazebo/link_states
/gazebo/model_states
/gazebo/parameter_descriptions
/gazebo/parameter_updates
/gazebo/performance_metrics
/gazebo/set_link_state
/gazebo/set_model_state
/initialpose
/move_base_simple/goal
/rosout
/rosout_agg
/smart/cmd_vel
/smart/front_left_steering_position_controller/command
/smart/front_right_steering_position_controller/command
/smart/ground_truth/state
/smart/joint_states
/smart/rear_left_velocity_controller/command
/smart/rear_right_velocity_controller/command
/tf
/tf_static
```